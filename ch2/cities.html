<!doctype html>

<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.8/d3.min.js"></script>
    </head>
    <body>
    </body>

    <script>
        let cities = d3.csv("../data/cities.csv", renderCities)
   
        function renderCities(data) {

            let maxPopulation = d3.max(data, d => parseInt(d.population))

            let containerWidth = 500
            let containerHeight = 500

            let yScaleCities = d3.scaleLinear()
                                .domain([0, maxPopulation])
                                .range([0, containerHeight])

            d3.select("body")
            .append("svg")
            .attr("height", containerHeight)
            .attr("width", containerWidth)
            .selectAll("rect")
            .data(data)
            .enter()
            .append("rect")
            .attr("class", "cities")
            .attr("x", (d, i) => i * 20)
            .attr("y", d => containerHeight - yScaleCities(parseInt(d.population)))
            .attr("width", 10)
            .attr("height", d => yScaleCities(parseInt(d.population)))
            .attr("stroke-width", "1px")
            .attr("stroke", "#FE9922")
            .attr("fill", "#9A8B7A")
        }

    </script>
</html>
